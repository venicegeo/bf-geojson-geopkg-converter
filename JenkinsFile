@Library('pipelib@master') _
node ('sl61') { 
    
    stage('Setup') {
    git([
      url: "https://github.com/venicegeo/bf-geojson-geopkg-converter",
      branch: "master"
    ])
  }
 
    stage("Build geopackage") {                                                               
      git url: "https://github.com/venicegeo/geopackage-java.git"
        sh "pwd"                  
         withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
          sh "mvn clean install -DskipTests" 
      }                                                                          
    }    

    stage("Build geopackage-wkb") {                                                
      git url: "https://github.com/venicegeo/geopackage-wkb-java.git"
        sh "pwd"                
         withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
          sh "mvn clean install -DskipTests"
     }                                                                          
   }     

    stage("Build geopackage-core") {                                               
      git url: "https://github.com/venicegeo/geopackage-core-java.git"             
        sh "pwd"
         withEnv(["PATH+MAVEN=${tool "M3"}/bin"]) {                                 
          sh "mvn clean install" 
      }                                                                          
   }       
}
